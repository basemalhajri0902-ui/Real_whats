# ğŸ  Ù…Ù†Ø¸ÙˆÙ…Ø© Ø¹Ù‚Ø§Ø±ÙŠ Ø¬Ø¯Ø© - Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±
## Real Estate Jeddah System - Analysis & Development Plan

---

## ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ

### âœ… Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡:
| Ø§Ù„Ù…ÙƒÙˆÙ† | Ø§Ù„Ø­Ø§Ù„Ø© | Ø§Ù„ÙˆØµÙ |
|--------|--------|-------|
| Backend API | âœ… ÙŠØ¹Ù…Ù„ | Node.js/Express Ø¹Ù„Ù‰ Vercel |
| Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª | âœ… ÙŠØ¹Ù…Ù„ | Supabase PostgreSQL |
| Ø¨ÙˆØª ÙˆØ§ØªØ³Ø§Ø¨ | âœ… ÙŠØ¹Ù…Ù„ | Wasender API Ù…ØªØµÙ„ |
| Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¨ÙˆØª | âœ… Ø¬Ø§Ù‡Ø² | Ù‚ÙˆØ§Ø¦Ù… Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¹Ø±Ø¨ÙŠØ© |
| Ù…ÙˆØ§ØµÙØ§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© | âœ… Ø¬Ø§Ù‡Ø² | Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø± |

### âš ï¸ ÙŠØ­ØªØ§Ø¬ ØªØ·ÙˆÙŠØ±:
| Ø§Ù„Ù…ÙƒÙˆÙ† | Ø§Ù„Ø­Ø§Ù„Ø© | Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ |
|--------|--------|---------|
| ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ† | âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ + Ù…ÙˆØ§ÙÙ‚Ø© |
| Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | âŒ Ø£Ø³Ø§Ø³ÙŠØ© ÙÙ‚Ø· | Ù„ÙˆØ­Ø© ÙƒØ§Ù…Ù„Ø© |
| Ø§Ù„Ø£Ù…Ø§Ù† | âš ï¸ Ø¬Ø²Ø¦ÙŠ | JWT + RLS + ØªØ´ÙÙŠØ± |
| Ø£Ø­ÙŠØ§Ø¡ Ø¬Ø¯Ø© | âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | Ù‚Ø§Ø¦Ù…Ø© Ù…Ø­Ø¯Ø¯Ø© |

---

## ğŸ¯ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

### 1ï¸âƒ£ ØªØ®ØµÙŠØµ Ù…Ø¯ÙŠÙ†Ø© Ø¬Ø¯Ø© ÙÙ‚Ø·

```
ğŸ“ Ø£Ø­ÙŠØ§Ø¡ Ø¬Ø¯Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© (30 Ø­ÙŠ):

ğŸ¢ Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ Ø§Ù„Ø±Ø§Ù‚ÙŠØ©:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Ø§Ù„Ø­Ù…Ø±Ø§Ø¡
2. Ø§Ù„Ø±ÙˆØ¶Ø©
3. Ø§Ù„Ø´Ø§Ø·Ø¦
4. Ø§Ù„Ø£Ù†Ø¯Ù„Ø³
5. Ø§Ù„Ù…Ø­Ù…Ø¯ÙŠØ©
6. Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡
7. Ø§Ù„Ù†Ø¹ÙŠÙ…
8. Ø§Ù„ÙÙŠØµÙ„ÙŠØ©
9. Ø§Ù„Ø³Ù„Ø§Ù…Ø©
10. Ø§Ù„Ø±Ø¨ÙˆØ©

ğŸ˜ï¸ Ø£Ø­ÙŠØ§Ø¡ ÙˆØ³Ø· Ø¬Ø¯Ø©:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
11. Ø§Ù„Ø¨Ù„Ø¯
12. Ø§Ù„Ø¹Ø²ÙŠØ²ÙŠØ©
13. Ø§Ù„Ù†Ø³ÙŠÙ…
14. Ø§Ù„ØµÙØ§
15. Ø§Ù„Ù…Ø±ÙˆØ©
16. Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©
17. Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©
18. Ø§Ù„Ø®Ø§Ù„Ø¯ÙŠØ©
19. Ø¨Ù†ÙŠ Ù…Ø§Ù„Ùƒ
20. Ø§Ù„ÙƒÙ†Ø¯Ø±Ø©

ğŸ—ï¸ Ø£Ø­ÙŠØ§Ø¡ Ø´Ù…Ø§Ù„ Ø¬Ø¯Ø©:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
21. Ø£Ø¨Ø­Ø± Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©
22. Ø£Ø¨Ø­Ø± Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©
23. Ø§Ù„ÙŠØ§Ù‚ÙˆØª
24. Ø§Ù„Ù…Ø±Ø¬Ø§Ù†
25. Ø§Ù„Ù„Ø¤Ù„Ø¤
26. Ø°Ù‡Ø¨Ø§Ù†

ğŸ  Ø£Ø­ÙŠØ§Ø¡ Ø¬Ù†ÙˆØ¨ Ø¬Ø¯Ø©:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
27. Ø§Ù„Ø³Ù†Ø§Ø¨Ù„
28. Ø§Ù„Ø­Ø±Ø§Ø²Ø§Øª
29. Ø§Ù„Ù…Ù†ØªØ²Ù‡Ø§Øª
30. Ø£Ø®Ø±Ù‰ (ØªØ­Ø¯ÙŠØ¯)
```

---

### 2ï¸âƒ£ Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†

```mermaid
flowchart TD
    A[Ù…Ø³ÙˆÙ‚ Ø¬Ø¯ÙŠØ¯] -->|ÙˆØ§ØªØ³Ø§Ø¨| B[Ø£Ø±Ø³Ù„: ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ÙˆÙ‚]
    B --> C[Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª]
    C --> D[Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„]
    D --> E[Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„]
    E --> F[Ø±Ù‚Ù… Ø§Ù„Ø±Ø®ØµØ© Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠØ©]
    F --> G[Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ø­ÙŠØ§Ø¡]
    G --> H[Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø±Ø®ØµØ©]
    H --> I[Ø­ÙØ¸ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª]
    I --> J[Ø§Ù„Ø­Ø§Ù„Ø©: pending]
    J --> K[Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©]
    K --> L{Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©}
    L -->|Ù…ÙˆØ§ÙÙ‚Ø©| M[ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨]
    L -->|Ø±ÙØ¶| N[Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø±ÙØ¶]
    M --> O[Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø³ÙˆÙ‚]
```

#### Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
```json
{
    "full_name": "Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù…Ø±ÙŠ",
    "phone": "0501234567",
    "license_number": "1234567890",
    "license_image": "https://...",
    "city": "Ø¬Ø¯Ø©",
    "districts": ["Ø§Ù„Ø­Ù…Ø±Ø§Ø¡", "Ø§Ù„Ø±ÙˆØ¶Ø©", "Ø§Ù„Ø´Ø§Ø·Ø¦"],
    "status": "pending",
    "registration_date": "2026-01-28",
    "activated_at": null,
    "activated_by": null
}
```

---

### 3ï¸âƒ£ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ  Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø¹Ù‚Ø§Ø±ÙŠ Ø¬Ø¯Ø©                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ 150      â”‚ â”‚ 45       â”‚ â”‚ 12       â”‚ â”‚ 89       â”‚       â”‚
â”‚  â”‚ Ø¹Ù‚Ø§Ø±Ø§Øª  â”‚ â”‚ Ù…Ø³ÙˆÙ‚ÙŠÙ†  â”‚ â”‚ Ø´Ø±ÙƒØ§Øª   â”‚ â”‚ Ø·Ù„Ø¨Ø§Øª   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”” Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©                                        â”‚
â”‚  â”œâ”€â”€ 5 Ù…Ø³ÙˆÙ‚ÙŠÙ† Ø¬Ø¯Ø¯ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©                          â”‚
â”‚  â”œâ”€â”€ 3 Ø´Ø±ÙƒØ§Øª ØªØ·ÙˆÙŠØ± Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚                           â”‚
â”‚  â””â”€â”€ 12 Ø¹Ù‚Ø§Ø± Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“± Ø¢Ø®Ø± Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª                                           â”‚
â”‚  â”œâ”€â”€ 0501234567 - ÙŠØ¨Ø­Ø« Ø¹Ù† ÙÙŠÙ„Ø§ ÙÙŠ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡                   â”‚
â”‚  â”œâ”€â”€ 0559876543 - ÙŠØ±ÙŠØ¯ ØªØ£Ø¬ÙŠØ± Ø´Ù‚Ø© ÙÙŠ Ø§Ù„Ø´Ø§Ø·Ø¦                  â”‚
â”‚  â””â”€â”€ 0541112222 - Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ù„ØªÙ…ÙˆÙŠÙ„                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ØµÙØ­Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:
| Ø§Ù„ØµÙØ­Ø© | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|--------|---------|
| ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© | Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª + ØªÙ†Ø¨ÙŠÙ‡Ø§Øª |
| ğŸ‘¥ Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ† | Ù‚Ø§Ø¦Ù…Ø© + Ù…ÙˆØ§ÙÙ‚Ø§Øª + Ø¨Ø­Ø« |
| ğŸ¢ Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªØ·ÙˆÙŠØ± | Ù‚Ø§Ø¦Ù…Ø© + Ù…ÙˆØ§ÙÙ‚Ø§Øª + Ø¹Ù‚Ø§Ø±Ø§ØªÙ‡Ù… |
| ğŸ˜ï¸ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª | ÙƒÙ„ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª + ÙÙ„ØªØ±Ø© + Ù…ÙˆØ§ÙÙ‚Ø§Øª |
| ğŸ’¬ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª | Ø³Ø¬Ù„ ÙƒØ§Ù…Ù„ + Ø¨Ø­Ø« |
| ğŸ‘¤ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ | Ù‚Ø§Ø¦Ù…Ø© + Ø·Ù„Ø¨Ø§ØªÙ‡Ù… |
| ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± | Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª + ØªØµØ¯ÙŠØ± |
| âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª | Ø£Ø­ÙŠØ§Ø¡ + Ø±Ø³Ø§Ø¦Ù„ + ØµÙ„Ø§Ø­ÙŠØ§Øª |

---

## ğŸ” Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ù…Ù†ÙŠ

### Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„:

| Ø§Ù„Ù…Ø®Ø§Ø·Ø± | Ø§Ù„Ø®Ø·ÙˆØ±Ø© | Ø§Ù„Ø­Ù„ |
|---------|---------|------|
| Ø¯Ø®ÙˆÙ„ ØºÙŠØ± Ù…ØµØ±Ø­ | ğŸ”´ Ø¹Ø§Ù„ÙŠ | JWT + 2FA |
| ØªØ³Ø±ÙŠØ¨ Ø¨ÙŠØ§Ù†Ø§Øª | ğŸ”´ Ø¹Ø§Ù„ÙŠ | RLS + ØªØ´ÙÙŠØ± |
| Ù‡Ø¬Ù…Ø§Øª SQL Injection | ğŸ”´ Ø¹Ø§Ù„ÙŠ | Prepared Statements (Supabase) |
| Ù‡Ø¬Ù…Ø§Øª XSS | ğŸŸ¡ Ù…ØªÙˆØ³Ø· | Input Sanitization |
| Spam ÙˆØ§ØªØ³Ø§Ø¨ | ğŸŸ¡ Ù…ØªÙˆØ³Ø· | Rate Limiting |
| Ø§Ù†ØªØ­Ø§Ù„ Ù‡ÙˆÙŠØ© | ğŸŸ¡ Ù…ØªÙˆØ³Ø· | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø®ØµØ© |

### ğŸ›¡ï¸ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø£Ù…Ù†ÙŠØ© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:

```javascript
// 1. JWT Authentication
const token = jwt.sign({ userId, role }, SECRET, { expiresIn: '24h' });

// 2. Rate Limiting
const limiter = rateLimit({
    windowMs: 15 * 60 * 1000, // 15 Ø¯Ù‚ÙŠÙ‚Ø©
    max: 100 // 100 Ø·Ù„Ø¨ ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰
});

// 3. Input Validation
const validatePhone = (phone) => /^05\d{8}$/.test(phone);
const validateLicense = (license) => /^\d{10}$/.test(license);

// 4. Password Hashing (Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©)
const hashedPassword = await bcrypt.hash(password, 12);

// 5. CORS Configuration
app.use(cors({
    origin: ['https://real-whats.vercel.app'],
    credentials: true
}));
```

### Row Level Security (RLS) ÙÙŠ Supabase:
```sql
-- Ø§Ù„Ù…Ø³ÙˆÙ‚ ÙŠØ±Ù‰ Ø¹Ù‚Ø§Ø±Ø§ØªÙ‡ ÙÙ‚Ø·
CREATE POLICY "Marketer sees own properties"
ON properties FOR SELECT
USING (marketer_id = auth.uid());

-- Ø§Ù„Ù…Ø³ÙˆÙ‚ ÙŠØ¹Ø¯Ù„ Ø¹Ù‚Ø§Ø±Ø§ØªÙ‡ ÙÙ‚Ø·
CREATE POLICY "Marketer updates own properties"
ON properties FOR UPDATE
USING (marketer_id = auth.uid());

-- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ØªØ±Ù‰ ÙƒÙ„ Ø´ÙŠØ¡
CREATE POLICY "Admin full access"
ON properties FOR ALL
USING (
    EXISTS (
        SELECT 1 FROM admin_users 
        WHERE id = auth.uid() 
        AND role IN ('super_admin', 'admin')
    )
);
```

---

## ğŸ“‹ Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª (Ø£Ø³Ø¨ÙˆØ¹ 1)
- [ ] ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø£Ø­ÙŠØ§Ø¡ Ø¬Ø¯Ø©
- [ ] Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ† Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
- [ ] ØµÙØ­Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
- [ ] JWT Authentication Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Ø£Ø³Ø¨ÙˆØ¹ 2)
- [ ] ØªØµÙ…ÙŠÙ… Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ø­ØªØ±Ø§ÙÙŠØ©
- [ ] ØµÙØ­Ø© Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ† + Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª
- [ ] ØµÙØ­Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª + Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
- [ ] ØµÙØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ù„ØªÙƒØ§Ù…Ù„ (Ø£Ø³Ø¨ÙˆØ¹ 3)
- [ ] Ù†Ø¸Ø§Ù… Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªØ·ÙˆÙŠØ±
- [ ] Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙˆØ±ÙŠØ©
- [ ] ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ¥Ø­ØµØ§Ø¦ÙŠØ§Øª
- [ ] ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø± (Ø£Ø³Ø¨ÙˆØ¹ 4)
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„
- [ ] ØªØ¯Ù‚ÙŠÙ‚ Ø£Ù…Ù†ÙŠ
- [ ] ØªÙˆØ«ÙŠÙ‚ API
- [ ] Ø¥Ø·Ù„Ø§Ù‚ ØªØ¬Ø±ÙŠØ¨ÙŠ

---

## ğŸ—„ï¸ ØªØ­Ø¯ÙŠØ«Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### Ø¬Ø¯ÙˆÙ„ Ø£Ø­ÙŠØ§Ø¡ Ø¬Ø¯Ø©:
```sql
CREATE TABLE jeddah_districts (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name_ar VARCHAR(50) NOT NULL,
    name_en VARCHAR(50),
    zone VARCHAR(20), -- north, south, center, east, west
    is_active BOOLEAN DEFAULT TRUE,
    properties_count INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT NOW()
);
```

### ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†:
```sql
ALTER TABLE marketers ADD COLUMN IF NOT EXISTS license_number VARCHAR(20);
ALTER TABLE marketers ADD COLUMN IF NOT EXISTS license_image TEXT;
ALTER TABLE marketers ADD COLUMN IF NOT EXISTS districts JSONB DEFAULT '[]';
ALTER TABLE marketers ADD COLUMN IF NOT EXISTS status VARCHAR(20) DEFAULT 'pending';
ALTER TABLE marketers ADD COLUMN IF NOT EXISTS activated_at TIMESTAMP;
ALTER TABLE marketers ADD COLUMN IF NOT EXISTS activated_by UUID;
ALTER TABLE marketers ADD COLUMN IF NOT EXISTS rejection_reason TEXT;
```

### Ø¬Ø¯ÙˆÙ„ Ø³Ø¬Ù„ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª:
```sql
CREATE TABLE approvals_log (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    entity_type VARCHAR(20) NOT NULL, -- marketer, developer, property
    entity_id UUID NOT NULL,
    action VARCHAR(20) NOT NULL, -- approved, rejected, pending
    admin_id UUID REFERENCES admin_users(id),
    reason TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);
```

---

## ğŸ”Œ API Endpoints Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†:
```
POST   /api/marketers/register     # ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ÙˆÙ‚ Ø¬Ø¯ÙŠØ¯
GET    /api/marketers              # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ† (Ø¥Ø¯Ø§Ø±Ø©)
GET    /api/marketers/:id          # ØªÙØ§ØµÙŠÙ„ Ù…Ø³ÙˆÙ‚
PUT    /api/marketers/:id/approve  # Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ù…Ø³ÙˆÙ‚
PUT    /api/marketers/:id/reject   # Ø±ÙØ¶ Ù…Ø³ÙˆÙ‚
GET    /api/marketers/:id/properties # Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ÙˆÙ‚
```

### Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªØ·ÙˆÙŠØ±:
```
POST   /api/developers/register    # ØªØ³Ø¬ÙŠÙ„ Ø´Ø±ÙƒØ©
GET    /api/developers             # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª
PUT    /api/developers/:id/approve # Ù…ÙˆØ§ÙÙ‚Ø©
PUT    /api/developers/:id/reject  # Ø±ÙØ¶
GET    /api/developers/:id/properties # Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©
```

### Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª:
```
GET    /api/properties             # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª
GET    /api/properties/pending     # Ø¹Ù‚Ø§Ø±Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
PUT    /api/properties/:id/approve # Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø¹Ù‚Ø§Ø±
PUT    /api/properties/:id/reject  # Ø±ÙØ¶ Ø¹Ù‚Ø§Ø±
```

### Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:
```
GET    /api/stats/dashboard        # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
GET    /api/stats/districts        # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­ÙŠ
GET    /api/stats/marketers        # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†
```

---

## ğŸ’¡ Ø£ÙÙƒØ§Ø± Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©

### 1. Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø®ØµØ©:
```javascript
// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø±Ù‚Ù… Ø§Ù„Ø±Ø®ØµØ© Ø¹Ø¨Ø± API Ù‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±
async function verifyLicense(licenseNumber) {
    // ÙŠÙ…ÙƒÙ† Ø±Ø¨Ø·Ù‡ Ù…Ø¹ REGA API Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹
    const isValid = /^\d{10}$/.test(licenseNumber);
    return { valid: isValid, verified: false };
}
```

### 2. Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…:
```sql
-- ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†
ALTER TABLE marketers ADD COLUMN points INT DEFAULT 0;
ALTER TABLE marketers ADD COLUMN level VARCHAR(20) DEFAULT 'bronze';
-- bronze < 100, silver < 500, gold < 1000, platinum >= 1000
```

### 3. Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø°ÙƒÙŠØ©:
```javascript
// Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ÙˆÙ‚ Ø¬Ø¯ÙŠØ¯
async function notifyAdminNewMarketer(marketer) {
    // 1. Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©
    // 2. Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
    // 3. Ø¥Ø´Ø¹Ø§Ø± ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
}
```

### 4. ØªÙ‚Ø§Ø±ÙŠØ± Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:
```javascript
// Cron job ÙƒÙ„ ÙŠÙˆÙ… Ø£Ø­Ø¯
const weeklyReport = {
    newCustomers: 45,
    newProperties: 12,
    newMarketers: 3,
    topDistrict: "Ø§Ù„Ø­Ù…Ø±Ø§Ø¡",
    pendingApprovals: 8
};
```

---

## âœ… Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©

Ù„ØªÙ†ÙÙŠØ° Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·Ø©ØŒ Ø§Ø¨Ø¯Ø£ Ø¨Ù€:

1. **Ø£ÙˆÙ„Ø§Ù‹:** ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø¬Ø¯ÙˆÙ„ Ø£Ø­ÙŠØ§Ø¡ Ø¬Ø¯Ø© + ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†)
2. **Ø«Ø§Ù†ÙŠØ§Ù‹:** Ø¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± "ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ÙˆÙ‚" ÙÙŠ Ø¨ÙˆØª ÙˆØ§ØªØ³Ø§Ø¨
3. **Ø«Ø§Ù„Ø«Ø§Ù‹:** Ø¨Ù†Ø§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©

---

> ğŸ“… Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: 2026-01-28
> ğŸ“ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: Ù…Ù†Ø¸ÙˆÙ…Ø© Ø¹Ù‚Ø§Ø±ÙŠ Ø¬Ø¯Ø©
> ğŸ‘¨â€ğŸ’» Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ†ÙÙŠØ°
