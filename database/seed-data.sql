-- ========================================
-- ุจูุงูุงุช ุชุฌุฑูุจูุฉ - Seed Data
-- ========================================

-- ========================================
-- 1๏ธโฃ ุดุฑูุงุช ุงูุชุทููุฑ
-- ========================================
INSERT INTO developers (id, company_name, contact_person, phone, email, license_number, city, is_verified) VALUES
('d1000001-0000-0000-0000-000000000001'::uuid, 'ุดุฑูุฉ ุงูุฑุงุฌุญู ููุชุทููุฑ ุงูุนูุงุฑู', 'ูุญูุฏ ุงูุฑุงุฌุญู', '+966501234567', 'info@rajhi-dev.com', 'DEV-2024-001', 'ุงูุฑูุงุถ', true),
('d1000002-0000-0000-0000-000000000002'::uuid, 'ุดุฑูุฉ ุฌุจู ุนูุฑ ููุชุทููุฑ', 'ุนุจุฏุงููู ุงูุณุงูู', '+966502345678', 'info@jabalomar.com', 'DEV-2024-002', 'ููุฉ', true),
('d1000003-0000-0000-0000-000000000003'::uuid, 'ุดุฑูุฉ ุฅุนูุงุฑ ุงูุณุนูุฏูุฉ', 'ุฎุงูุฏ ุงูุนุชูุจู', '+966503456789', 'info@emaar-sa.com', 'DEV-2024-003', 'ุฌุฏุฉ', true);

-- ========================================
-- 2๏ธโฃ ุงููุณูููู
-- ========================================
INSERT INTO marketers (id, full_name, phone, email, city, specialization, commission_rate, rating, is_active) VALUES
('a1000001-0000-0000-0000-000000000001'::uuid, 'ุฃุญูุฏ ูุญูุฏ ุงูุนุชูุจู', '+966551234567', 'ahmed@email.com', 'ุงูุฑูุงุถ', 'ููู', 2.5, 4.8, true),
('a1000002-0000-0000-0000-000000000002'::uuid, 'ุณุงุฑุฉ ุนุจุฏุงููู ุงููุญุทุงูู', '+966552345678', 'sara@email.com', 'ุงูุฑูุงุถ', 'ุดูู', 2.5, 4.5, true),
('a1000003-0000-0000-0000-000000000003'::uuid, 'ููุฏ ุณุนูุฏ ุงููุทูุฑู', '+966553456789', 'fahad@email.com', 'ุฌุฏุฉ', 'ุฃุฑุงุถู', 3.0, 4.2, true),
('a1000004-0000-0000-0000-000000000004'::uuid, 'ููุฑุฉ ุฎุงูุฏ ุงูุดูุฑู', '+966554567890', 'noura@email.com', 'ุงูุฏูุงู', 'ููู', 2.5, 4.9, true),
('a1000005-0000-0000-0000-000000000005'::uuid, 'ุนูุฑ ุญุณู ุงูุณุจูุนู', '+966555678901', 'omar@email.com', 'ุงูุฑูุงุถ', 'ุฏูุจููุณ', 2.5, 4.3, true);

-- ========================================
-- 3๏ธโฃ ุงูุนูุงุฑุงุช
-- ========================================
INSERT INTO properties (id, property_code, title, description, property_type, city, district, price, area, bedrooms, bathrooms, status, marketer_id, developer_id, features) VALUES
-- ููู ุงูุฑูุงุถ
('b1000001-0000-0000-0000-000000000001'::uuid, 'RYD-2026-001', 'ูููุง ูุงุฎุฑุฉ ูู ุญู ุงููุฑุฌุณ', 'ูููุง ุฑุงููุฉ ุจุชุตููู ุนุตุฑูุ ูุณุงุญุฉ ูุงุณุนุฉ ูุน ุญุฏููุฉ ุฎุงุตุฉ ููุณุจุญ', 'ูููุง', 'ุงูุฑูุงุถ', 'ุงููุฑุฌุณ', 2500000, 450, 5, 4, 'available', 'a1000001-0000-0000-0000-000000000001'::uuid, NULL, '["ูุณุจุญ", "ุญุฏููุฉ", "ูุตุนุฏ", "ุบุฑูุฉ ุณุงุฆู", "ุบุฑูุฉ ุฎุงุฏูุฉ"]'),
('b1000002-0000-0000-0000-000000000002'::uuid, 'RYD-2026-002', 'ูููุง ุนุตุฑูุฉ ูู ุงููููุง', 'ูููุง ุญุฏูุซุฉ ุงูุจูุงุก ุจุชุดุทูุจุงุช ุณูุจุฑ ุฏููููุณ', 'ูููุง', 'ุงูุฑูุงุถ', 'ุงููููุง', 3200000, 520, 6, 5, 'available', 'a1000001-0000-0000-0000-000000000001'::uuid, 'd1000001-0000-0000-0000-000000000001'::uuid, '["ูุณุจุญ", "ุญุฏููุฉ", "ูุตุนุฏ", "ูุธุงู ุฐูู"]'),

-- ุดูู ุงูุฑูุงุถ
('b1000003-0000-0000-0000-000000000003'::uuid, 'RYD-2026-003', 'ุดูุฉ ูุงุณุนุฉ ูู ุงูุนููุง', 'ุดูุฉ ุจุฅุทูุงูุฉ ุฑุงุฆุนุฉ ุนูู ุจุฑุฌ ุงูููููุฉ', 'ุดูุฉ', 'ุงูุฑูุงุถ', 'ุงูุนููุง', 850000, 180, 3, 2, 'available', 'a1000002-0000-0000-0000-000000000002'::uuid, NULL, '["ุฅุทูุงูุฉ", "ูููู ุณูุงุฑุฉ", "ุฃูู 24 ุณุงุนุฉ"]'),
('b1000004-0000-0000-0000-000000000004'::uuid, 'RYD-2026-004', 'ุดูุฉ ูุงุฎุฑุฉ ูู ุญู ุงููุงุณููู', 'ุดูุฉ ุฌุฏูุฏุฉ ุจุชุตููู ุฃููู', 'ุดูุฉ', 'ุงูุฑูุงุถ', 'ุงููุงุณููู', 650000, 150, 3, 2, 'available', 'a1000002-0000-0000-0000-000000000002'::uuid, NULL, '["ูููู ุณูุงุฑุฉ", "ููููุงุช"]'),

-- ุนูุงุฑุงุช ุฌุฏุฉ
('b1000005-0000-0000-0000-000000000005'::uuid, 'JED-2026-001', 'ูููุง ุนูู ุงูุจุญุฑ ูู ุฃุจุญุฑ', 'ูููุง ูุงุฎุฑุฉ ุจุฅุทูุงูุฉ ุจุญุฑูุฉ ูุจุงุดุฑุฉ', 'ูููุง', 'ุฌุฏุฉ', 'ุฃุจุญุฑ ุงูุดูุงููุฉ', 5500000, 600, 7, 6, 'available', 'a1000003-0000-0000-0000-000000000003'::uuid, NULL, '["ุฅุทูุงูุฉ ุจุญุฑูุฉ", "ูุณุจุญ", "ุญุฏููุฉ", "ูุฑุณู ูุงุฑุจ"]'),
('b1000006-0000-0000-0000-000000000006'::uuid, 'JED-2026-002', 'ุฃุฑุถ ุชุฌุงุฑูุฉ ุนูู ุงูููุฑููุด', 'ุฃุฑุถ ุจูููุน ุงุณุชุฑุงุชูุฌู ูููุดุงุฑูุน ุงูุชุฌุงุฑูุฉ', 'ุฃุฑุถ', 'ุฌุฏุฉ', 'ุงูููุฑููุด', 8000000, 1200, NULL, NULL, 'available', 'a1000003-0000-0000-0000-000000000003'::uuid, NULL, '["ูููุน ุชุฌุงุฑู", "ุนูู ุงูุดุงุฑุน ุงูุฑุฆูุณู"]'),

-- ุนูุงุฑุงุช ุงูุฏูุงู
('b1000007-0000-0000-0000-000000000007'::uuid, 'DMM-2026-001', 'ูููุง ูู ุญู ุงูููุตููุฉ', 'ูููุง ูุงุณุนุฉ ุจุชุตููู ุญุฏูุซ', 'ูููุง', 'ุงูุฏูุงู', 'ุงูููุตููุฉ', 1800000, 400, 5, 4, 'available', 'a1000004-0000-0000-0000-000000000004'::uuid, NULL, '["ุญุฏููุฉ", "ุบุฑูุฉ ุณุงุฆู"]'),

-- ุฏูุจููุณ
('b1000008-0000-0000-0000-000000000008'::uuid, 'RYD-2026-005', 'ุฏูุจููุณ ุญุฏูุซ ูู ุญู ุงูุฑูุงู', 'ุฏูุจููุณ ุจุชุตููู ุนุตุฑู ููุณุงุญุงุช ูุงุณุนุฉ', 'ุฏูุจููุณ', 'ุงูุฑูุงุถ', 'ุงูุฑูุงู', 1200000, 280, 4, 3, 'available', 'a1000005-0000-0000-0000-000000000005'::uuid, NULL, '["ุชุฑุงุณ", "ูููู ูุฒุฏูุฌ"]');

-- ========================================
-- 4๏ธโฃ ุงูุนููุงุก
-- ========================================
INSERT INTO customers (id, full_name, phone, city, budget_min, budget_max, preferred_type, preferred_property, status, assigned_marketer) VALUES
('c1000001-0000-0000-0000-000000000001'::uuid, 'ุนุจุฏุงูุฑุญูู ูุญูุฏ', '+966561234567', 'ุงูุฑูุงุถ', 1500000, 3000000, 'ุดุฑุงุก', 'ูููุง', 'new', 'a1000001-0000-0000-0000-000000000001'::uuid),
('c1000002-0000-0000-0000-000000000002'::uuid, 'ูุงุทูุฉ ุฃุญูุฏ', '+966562345678', 'ุงูุฑูุงุถ', 500000, 900000, 'ุดุฑุงุก', 'ุดูุฉ', 'contacted', 'a1000002-0000-0000-0000-000000000002'::uuid),
('c1000003-0000-0000-0000-000000000003'::uuid, 'ุณูุทุงู ุงูุนูุฑู', '+966563456789', 'ุฌุฏุฉ', 4000000, 6000000, 'ุดุฑุงุก', 'ูููุง', 'viewing', 'a1000003-0000-0000-0000-000000000003'::uuid),
('c1000004-0000-0000-0000-000000000004'::uuid, 'ููุฏ ุงูุณุงูู', '+966564567890', 'ุงูุฏูุงู', 1000000, 2000000, 'ุดุฑุงุก', 'ูููุง', 'new', 'a1000004-0000-0000-0000-000000000004'::uuid),
('c1000005-0000-0000-0000-000000000005'::uuid, 'ููุณู ุงูุบุงูุฏู', '+966565678901', 'ุงูุฑูุงุถ', 800000, 1500000, 'ุดุฑุงุก', 'ุฏูุจููุณ', 'negotiating', 'a1000005-0000-0000-0000-000000000005'::uuid);

-- ========================================
-- 5๏ธโฃ ุงูุตููุงุช
-- ========================================
INSERT INTO deals (id, deal_code, property_id, customer_id, marketer_id, deal_type, deal_value, commission_rate, commission_amount, status) VALUES
('e1000001-0000-0000-0000-000000000001'::uuid, 'DEAL-2026-001', 'b1000003-0000-0000-0000-000000000003'::uuid, 'c1000002-0000-0000-0000-000000000002'::uuid, 'a1000002-0000-0000-0000-000000000002'::uuid, 'sale', 850000, 2.5, 21250, 'completed'),
('e1000002-0000-0000-0000-000000000002'::uuid, 'DEAL-2026-002', 'b1000008-0000-0000-0000-000000000008'::uuid, 'c1000005-0000-0000-0000-000000000005'::uuid, 'a1000005-0000-0000-0000-000000000005'::uuid, 'sale', 1200000, 2.5, 30000, 'negotiating');

-- ========================================
-- 6๏ธโฃ ุฅุนุฏุงุฏุงุช ุงููุธุงู
-- ========================================
INSERT INTO settings (key, value, description) VALUES
('platform_name', '"ููุตุฉ ุนูุงุฑู"', 'ุงุณู ุงูููุตุฉ'),
('default_commission_rate', '2.5', 'ูุณุจุฉ ุงูุนูููุฉ ุงูุงูุชุฑุงุถูุฉ'),
('whatsapp_welcome_message', '"ูุฑุญุจุงู ุจู ูู ููุตุฉ ุนูุงุฑู! ๐\n\nุฃูุง ููุง ููุณุงุนุฏุชู ูู:\n1๏ธโฃ ุดุฑุงุก ุนูุงุฑ\n2๏ธโฃ ุชุฃุฌูุฑ ุนูุงุฑ\n3๏ธโฃ ุนุฑุถ ุนูุงุฑ ููุจูุน\n4๏ธโฃ ุงูุชุญุฏุซ ูุน ูุณูู\n\nุงุฎุชุฑ ุงูุฑูู ุงูููุงุณุจ"', 'ุฑุณุงูุฉ ุงูุชุฑุญูุจ ุนูู ูุงุชุณุงุจ'),
('supported_cities', '["ุงูุฑูุงุถ", "ุฌุฏุฉ", "ููุฉ", "ุงูุฏูุงู", "ุงูุฎุจุฑ", "ุงููุฏููุฉ"]', 'ุงููุฏู ุงููุฏุนููุฉ'),
('property_types', '["ูููุง", "ุดูุฉ", "ุฃุฑุถ", "ุฏูุจููุณ", "ุงุณุชูุฏูู", "ุจูุชูุงูุณ"]', 'ุฃููุงุน ุงูุนูุงุฑุงุช');

-- ========================================
-- ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงููุณูููู
-- ========================================
UPDATE marketers SET 
    total_sales = (SELECT COUNT(*) FROM deals WHERE marketer_id = marketers.id AND status = 'completed'),
    total_revenue = (SELECT COALESCE(SUM(commission_amount), 0) FROM deals WHERE marketer_id = marketers.id AND status = 'completed'),
    active_customers = (SELECT COUNT(*) FROM customers WHERE assigned_marketer = marketers.id AND status IN ('new', 'contacted', 'viewing', 'negotiating'));

-- ========================================
-- ุชุญุฏูุซ ุฅุญุตุงุฆูุงุช ุงูุดุฑูุงุช
-- ========================================
UPDATE developers SET 
    total_properties = (SELECT COUNT(*) FROM properties WHERE developer_id = developers.id);
